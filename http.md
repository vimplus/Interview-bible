# HTTP知识要点

## HTTP的不足：
* 通信使用明文，内容可能会被窃听；
* 不验证通信方的身份，因此有可能遭遇伪装；
* 无法证明报文的完整性，有可能已遭篡改；

## HTTP/2与HTTP/3 的新特性
* HTTP/1.1有两个主要的缺点：**安全不足**和**性能不高**。(HTTP/1.1的缺点)
* HTTP/2完全兼容HTTP/1，是“更安全的HTTP、更快的HTTPS"，头部压缩、多路复用等技术可以充分利用带宽，降低延迟，从而大幅度提高上网体验；
* QUIC 基于 UDP 实现，是 HTTP/3 中的底层支撑协议，该协议基于 UDP，又取了 TCP 中的精华，实现了即快又可靠的协议

## HTTP2 有什么好处
HTTP/2有三大特性：头部压缩、Server Push、多路复用

* 头部压缩
* 服务端推送
* 请求和响应的多路复用（多路复用：在一个HTTP的连接上，多路“HTTP消息”同时工作。）
* 二进制帧层
* 流量控制

### HTTP2多路复用的原理
复用同一个TCP连接

* 解决串行的文件传输：HTTP/2多路复用中引入二进制数据帧和流的概念，其中帧对数据进行顺序标识，如下图所示，这样浏览器收到数据之后，就可以按照序列对数据进行合并，而不会出现合并后数据错乱的情况。同样是因为有了序列，服务器就可以并行的传输数据，这就是流所做的事情。

* 解决连接数过多：HTTP/2对同一域名下所有请求都是基于流，也就是说同一域名不管访问多少文件，也只建立一路连接。同样Apache的最大连接数为300，因为有了这个新特性，最大的并发就可以提升到300，比原来提升了6倍！

(浅析HTTP/2的多路复用)[https://www.cnblogs.com/cangqinglang/p/11361638.html]

#### 为什么HTTP/1.1不能实现“多路复用”？
简单回答就是：HTTP/2是基于二进制“帧”的协议，HTTP/1.1是基于“文本分割”解析的协议。

## HTTPS 有什么好处，有什么缺点，为什么？

### 好处
* 保证了用户数据的安全性
* 搜索结果中的排名将会更高

### 缺点
* 耗时高，几乎比HTTP耗时50%；
* 增加10%到20%的耗电；
* 服务器端资源占用高、增加宽带投入成本；
* 成本高；
* SSL 证书的信用链体系并不安全。特别是在某些国家可以控制 CA 根证书的情况下，中间人攻击一样可行。

### 为什么？
在HTTP的基础上增加了加密层(SSL/TLS)。

## TCP三次握手
1.由客户端向服务端发送 SYN 同步报文。
2.当服务端收到 SYN 同步报文之后，会返回给客户端 SYN 同步报文和 ACK 确认报文。
3.客户端会向服务端发送 ACK 确认报文，此时客户端和服务端的连接正式建立。

### 为什么需要三次？
第一次：确定客户端有发送的能力；
第二次：确定服务端有接收的能力和发送的能力；
第三次：确定客户端有接收的能力；


## TCP与UDP的区别，最佳应用场景？
### 区别
* 1.基于连接与无连接
* 2.TCP要求系统资源较多，UDP较少； 
* 3.UDP程序结构较简单 
* 4.流模式（TCP）与数据报模式(UDP); 
* 5.TCP保证数据正确性，UDP可能丢包 
* 6.TCP保证数据顺序，UDP不保证 

TCP：面向连接、传输可靠(保证数据正确性,保证数据顺序)、用于传输大量数据(流模式)、速度慢，建立连接需要开销较多(时间，系统资源)。

UDP：面向非连接、传输不可靠、用于传输少量数据(数据包模式)、速度快。

|              | TCP                       | UDP                         |
| :----------- | :------------------------ | --------------------------- |
| 是否连接      | 面向连接                     | 无连接                       |
| 是否可靠      | 可靠传输，使用流量控制和拥塞控制 | 不可靠传输，不使用流量控制和拥塞控制 |
| 连接对象个数  | 只能是一对一通信               | 支持一对一，一对多，多对一和多对多交互通信 |
| 传输方式     | 面向字节流                    | 面向报文                             |
| 首部开销     | 首部最小20字节，最大60字节      | 首部开销小，仅8字节            |
| 适用场景     | 适用于要求可靠传输的应用，例如文件传输 | 适用于实时应用（IP电话、视频会议、直播等） |

### 总结
* TCP向上层提供面向连接的可靠服务 ，UDP向上层提供无连接不可靠服务。
* 虽然 UDP 并没有 TCP 传输来的准确，但是也能在很多实时性要求高的地方有所作为
* 对数据准确性要求高，速度可以相对较慢的，可以选用TCP

### UDP应用场景
* 1.面向数据报方式
* 2.网络数据大多为短消息 
* 3.拥有大量Client
* 4.对数据安全性无特殊要求
* 5.网络负担非常重，但对响应速度要求高

## HTTP3采用的传输层协议是什么？
UDP

## 什么情况下http2会比http1.1慢？
丢包的情况下

## 一个 tcp 连接能发几个 http 请求？
* HTTP 1.0：一般情况下，不支持长连接，一个 TCP 发送一个 HTTP 请求；
* HTTP 1.1：支持了长连接，因此只要 TCP 连接不断开，便可以一直发送 HTTP 请求，没有上限；
* HTTP 2.0：支持多用复用，一个 TCP 连接是可以并发多个 HTTP 请求，也支持长连接，无上限；

## 网络七层协议有哪些？
应用层（Application）
表示层（Presentation）
会话层（Session）
传输层（Transport）
网络层（Network）
数据链路层（Data Link）
物理层（Physical）